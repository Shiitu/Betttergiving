{"ast":null,"code":"import axios from'axios';import React,{useContext,useEffect,useState}from'react';import{UserContext}from'../state/UserState';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MakeAdmin=()=>{const[email,setEmail]=useState(\"\");const{user}=useContext(UserContext);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const res=await axios({method:\"patch\",url:\"http://localhost:5000/api/user/makeAdmin\",data:{email},headers:{authToken:localStorage.getItem(\"token\")}});console.log(res);if(res.data.success){alert(\"User with email \\\"\".concat(email,\"\\\" has been made Admin\"));}}catch(error){alert(error.message+\" check the email\");}};useEffect(()=>{if(user.role!==\"SUPERADMIN\"){navigate(\"/\");console.log(user);}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium leading-6 text-gray-900\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",autoComplete:\"email\",required:true,onChange:e=>setEmail(e.target.value),className:\"p-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"flex w-full justify-center rounded-md bg-[#2D89C8] px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",children:\"Update Role\"})})]})});};export default MakeAdmin;","map":{"version":3,"names":["axios","React","useContext","useEffect","useState","UserContext","useNavigate","jsx","_jsx","jsxs","_jsxs","MakeAdmin","email","setEmail","user","navigate","handleSubmit","e","preventDefault","res","method","url","data","headers","authToken","localStorage","getItem","console","log","success","alert","concat","error","message","role","className","children","onSubmit","htmlFor","id","name","type","autoComplete","required","onChange","target","value"],"sources":["/Users/shubhamkumar/Desktop/Better/src/components/MakeAdmin.jsx"],"sourcesContent":["import axios from 'axios'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { UserContext } from '../state/UserState'\nimport { useNavigate } from 'react-router-dom'\n\nconst MakeAdmin = () => {\n    const [email, setEmail] = useState(\"\")\n    const { user } = useContext(UserContext)\n    const navigate = useNavigate()\n    const handleSubmit = async (e) => {\n        e.preventDefault()\n        try {\n\n\n\n            const res = await axios({\n                method: \"patch\",\n                url: \"http://localhost:5000/api/user/makeAdmin\",\n                data: {\n                    email\n                },\n                headers: {\n                    authToken: localStorage.getItem(\"token\")\n                }\n            })\n            console.log(res);\n            if (res.data.success) {\n                alert(`User with email \"${email}\" has been made Admin`)\n            }\n        }\n        catch (error) {\n            alert(error.message + \" check the email\")\n        }\n    }\n\n    useEffect(()=>{\n        if (user.role !== \"SUPERADMIN\") {\n            navigate(\"/\")\n            console.log(user);\n        }\n    }, [])\n\n    return (\n        <div className=\"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8\">\n            <form className=\"space-y-6\" onSubmit={handleSubmit}>\n                <div>\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium leading-6 text-gray-900\">\n                        Email address\n                    </label>\n                    <div className=\"mt-2\">\n                        <input\n                            id=\"email\"\n                            name=\"email\"\n                            type=\"email\"\n                            autoComplete=\"email\"\n                            required\n                            onChange={(e) => setEmail(e.target.value)}\n                            className=\"p-2 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                        />\n                    </div>\n                </div>\n\n\n                <div>\n                    <button\n                        type=\"submit\"\n                        className=\"flex w-full justify-center rounded-md bg-[#2D89C8] px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n                    >\n                        Update Role\n                    </button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default MakeAdmin"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,oBAAoB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAEU,IAAK,CAAC,CAAGZ,UAAU,CAACG,WAAW,CAAC,CACxC,KAAM,CAAAU,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAIA,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAnB,KAAK,CAAC,CACpBoB,MAAM,CAAE,OAAO,CACfC,GAAG,CAAE,0CAA0C,CAC/CC,IAAI,CAAE,CACFV,KACJ,CAAC,CACDW,OAAO,CAAE,CACLC,SAAS,CAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAC3C,CACJ,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAACT,GAAG,CAAC,CAChB,GAAIA,GAAG,CAACG,IAAI,CAACO,OAAO,CAAE,CAClBC,KAAK,sBAAAC,MAAA,CAAqBnB,KAAK,0BAAuB,CAAC,CAC3D,CACJ,CACA,MAAOoB,KAAK,CAAE,CACVF,KAAK,CAACE,KAAK,CAACC,OAAO,CAAG,kBAAkB,CAAC,CAC7C,CACJ,CAAC,CAED9B,SAAS,CAAC,IAAI,CACV,GAAIW,IAAI,CAACoB,IAAI,GAAK,YAAY,CAAE,CAC5BnB,QAAQ,CAAC,GAAG,CAAC,CACbY,OAAO,CAACC,GAAG,CAACd,IAAI,CAAC,CACrB,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACIN,IAAA,QAAK2B,SAAS,CAAC,mEAAmE,CAAAC,QAAA,cAC9E1B,KAAA,SAAMyB,SAAS,CAAC,WAAW,CAACE,QAAQ,CAAErB,YAAa,CAAAoB,QAAA,eAC/C1B,KAAA,QAAA0B,QAAA,eACI5B,IAAA,UAAO8B,OAAO,CAAC,OAAO,CAACH,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAC,eAErF,CAAO,CAAC,cACR5B,IAAA,QAAK2B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACjB5B,IAAA,UACI+B,EAAE,CAAC,OAAO,CACVC,IAAI,CAAC,OAAO,CACZC,IAAI,CAAC,OAAO,CACZC,YAAY,CAAC,OAAO,CACpBC,QAAQ,MACRC,QAAQ,CAAG3B,CAAC,EAAKJ,QAAQ,CAACI,CAAC,CAAC4B,MAAM,CAACC,KAAK,CAAE,CAC1CX,SAAS,CAAC,2MAA2M,CACxN,CAAC,CACD,CAAC,EACL,CAAC,cAGN3B,IAAA,QAAA4B,QAAA,cACI5B,IAAA,WACIiC,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,uPAAuP,CAAAC,QAAA,CACpQ,aAED,CAAQ,CAAC,CACR,CAAC,EACJ,CAAC,CACN,CAAC,CAEd,CAAC,CAED,cAAe,CAAAzB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}